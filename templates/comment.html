{# recursive template! http://blog.elsdoerfer.name/2008/01/22/recursion-in-django-templates/ #}

{% for c in e_comments %}
{% if c.comment_parent_id == parent %}
<div id="comment-{{ c.comment_id }}" class="comment{% if c.comment_parent_id %} comment-reply{% endif %}">
{{ c.comment_text|safe|linebreaks }}
<p class="byline">
  {% if c.comment_commenter_id %}<img src="{{ a_thumbnail_url }}" width="18" height="18" />{% endif %} 
  by {{ c.comment_author }} - <a href="/or/{{ e.entry_basename }}#comment-{{ c.comment_id }}"><abbr class="published" title="{{ c.comment_created_on|date:"c" }}">{{ c.comment_created_on|date:"F j, Y f A" }}</abbr></a><br />
  <a title="Reply" href="#reply">Reply</a>
</p>
</div>
  <div style="margin-left: 20px;">
  {% with "comment.html" as filename %}
  {% with c.comment_id as parent %}
    {% include filename %}
  {% endwith %}
  {% endwith %}
  </div>
{% endif %}
{% endfor %}

